<% layout("layouts/boilerplate") %>
<% block("head").append('<script src="https://js.stripe.com/v3/"></script>') %>
<% block("head").append('<script src="/js/pay.js" defer></script>') %>
<main class="container">
    <h1>Blue Flamingo</h1>
    <h2>Pay Invoice</h2>
    <a class="btn btn-primary" href="/invoices">Back to Invoices</a>
    <p><%= invoice._id %> - $<%= invoice.amount %></p>
    <% if(invoice.notes){ %> 
        <p><%= invoice.notes %> </p>
    <% } %> 
    <form action="" id="payment-form">
        <div id="card-element"></div>
        <div id="card-errors" role="alert"></div>
        <button id="submit" class="btn btn-primary">Pay Invoice</button>
    </form>
</main>
<script>
    //ignore if there is an IDE syntax error here, this is correct for ejs
    const invoice = <%- JSON.stringify(invoice) %>;
    const clientSecret = "<%= client_secret %>";
</script>